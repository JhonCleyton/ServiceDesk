{% extends 'base.html' %}
{% block title %}Meu Perfil{% endblock %}
{% block content %}
<h2>Meu Perfil</h2>
<form method="post" enctype="multipart/form-data" class="mt-3">
  {{ form.hidden_tag() }}
  <div class="row">
    <div class="col-md-6 mb-3">{{ form.name.label(class_='form-label') }}{{ form.name(class_='form-control') }}</div>
    <div class="col-md-6 mb-3">{{ form.email.label(class_='form-label') }}{{ form.email(class_='form-control') }}</div>
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">{{ form.password.label(class_='form-label') }}{{ form.password(class_='form-control') }}<div class="form-text">Opcional: preencha para alterar a senha.</div></div>
    <div class="col-md-6 mb-3">{{ form.confirm_password.label(class_='form-label') }}{{ form.confirm_password(class_='form-control') }}</div>
  </div>
  <div class="row align-items-end">
    <div class="col-md-6 mb-3">{{ form.avatar_file.label(class_='form-label') }}{{ form.avatar_file(class_='form-control') }}</div>
    <div class="col-md-6 mb-3">
      {% if current_user.avatar_filename %}
        <div class="d-flex align-items-center gap-2"><img src="{{ url_for('static', filename='uploads/avatars/' ~ current_user.avatar_filename) }}" alt="Avatar atual" style="width:64px;height:64px;border-radius:50%"> <small class="text-muted">Avatar atual</small></div>
      {% else %}
        <small class="text-muted">Sem avatar enviado.</small>
      {% endif %}
    </div>
  </div>
  {{ form.submit(class_='btn btn-primary') }}
</form>
{% endblock %}
